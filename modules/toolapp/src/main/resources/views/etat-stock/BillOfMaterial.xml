<?xml version="1.0" encoding="UTF-8"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.4.xsd">

  <form name="bom-custo-form" title="Cas d'emploi"
    model="com.axelor.apps.production.db.TempBomTree" width="large" canNew="false" canEdit="false"
    canSave="false" canCopy="false" onNew="action-stock-details-record-set-user-s-company">
    <panel name="MainFilters" colSpan="12" itemSpan="4">
      <field name="product" title="Product" type="many-to-one" canEdit="false"
        domain="self.procurementMethodSelect='produce'"/>
      <field name="company" title="Company" showIf="product"/>
      <field name="stockLocation" title="Stock location" showIf="product &amp;&amp; $company"
        canEdit="false" domain="self.typeSelect != 3 and self.company = :company"/>

      <button name="bomTree" title="Arborescence" colspan="3" css="btn-custom"
        onClick="action-method-production-open-product-tree-custom"/>
    </panel>
  </form>

  <action-record name="action-stock-details-record-set-user-s-company"
    model="com.axelor.apps.base.db.Product">
    <field name="_company" expr="eval: __user__.getActiveCompany()" if="eval: _isFromMenu"/>
  </action-record>

  <action-method name="action-method-production-open-product-tree-custom">
    <call class="bzh.toolapp.apps.specifique.web.ProductController" method="openProductTree"/>
  </action-method>

  <action-view name="action-view-get-bom-tree" title="Arborescence article"
    model="com.axelor.apps.production.db.TempBomTree">
    <view type="grid" name="quality-alert-grid"/>
    <view type="form" name="quality-alert-form"/>
    <domain>self.id = :_toolTempBomTreeId</domain>
    <context name="_toolTempBomTreeId" expr="eval: product.defaultBillOfMaterial"/>
  </action-view>

</object-views>